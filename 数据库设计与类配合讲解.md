# 服务器端数据库

唯一数据库（userdb）

四张表：

## 1. userinfo（用户基本信息表）

| 字段名   | 说明                                                         |
| -------- | ------------------------------------------------------------ |
| id       | 整型，主键自增，用户唯一标识                                 |
| name     | 字符串 (30)，非空且唯一，用户登录名                          |
| passwd   | 字符串 (30)，非空，用户密码（建议加密存储）                  |
| head     | 字符串 (100)，默认 'default.png'，用户头像文件路径           |
| status   | 整型，默认 0（离线），用户在线状态（0 = 离线、1 = 在线、2 = 忙碌等） |
| lasttime | 时间类型，默认 NULL，用户最后上线 / 离线时间                 |

## 2. groups（群组表）

| 字段名      | 说明                                                         |
| ----------- | ------------------------------------------------------------ |
| group_id    | 整型，主键自增，群组唯一标识                                 |
| group_name  | 字符串 (50)，非空，群组名称                                  |
| group_head  | 字符串 (100)，默认 'default_group.png'，群头像文件路径       |
| create_time | 时间类型，默认当前时间戳，群组创建时间                       |
| creator_id  | 整型，非空，外键关联 userinfo (id)，群组创建者 ID（级联删除） |

## 3. group_member（群组成员表）

| 字段名    | 说明                                                         |
| --------- | ------------------------------------------------------------ |
| id        | 整型，主键自增，群成员关联记录唯一标识                       |
| group_id  | 整型，非空，外键关联 groups (group_id)，所属群组 ID（级联删除） |
| user_id   | 整型，非空，外键关联 userinfo (id)，成员用户 ID（级联删除）  |
| identity  | 整型，默认 0，群内身份（0 = 普通成员、1 = 管理员、2 = 群主） |
| join_time | 时间类型，默认当前时间戳，成员加入群组时间                   |

## 4. friend（好友表）

| 字段名      | 说明                                                         |
| ----------- | ------------------------------------------------------------ |
| id          | 整型，主键自增，好友关系记录唯一标识                         |
| user_id     | 整型，非空，外键关联 userinfo (id)，发起添加的用户 ID（级联删除） |
| friend_id   | 整型，非空，外键关联 userinfo (id)，被添加的好友 ID（级联删除） |
| remark      | 字符串 (30)，默认空，好友备注名                              |
| status      | 整型，默认 0，好友状态（0 = 待验证、1 = 已通过、2 = 已拉黑） |
| add_time    | 时间类型，默认当前时间戳，发起添加好友的时间                 |
| update_time | 时间类型，默认当前时间戳，好友状态更新时间                   |
